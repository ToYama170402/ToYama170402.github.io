+++
title = '誰も教えてくれないシェルの使い方'
date = 2024-11-01T00:00:00+09:00
categories = ["入門","技術","経験談"]
draft = false
+++
# 誰も教えてくれないシェルの使い方

最近大学の講義でシェルを使う授業を友達を誘って受けています。その友達と課題とかやっていると、誰かから教わらないと知らないような暗黙知的な部分が見えてきました。彼らのためにも、他のシェル入門者の方のためにもちょっと言語化してみたので、お付き合いください。

入門者、初心者向けに簡単に書いているので厳密性には大きくかけます。

## 対象読者

- Ubuntu on WSL
- bash

多少違っても大丈夫だとは思いますが、違っていたら適宜読み替えてください。

## シェルとは

映画で見るようなハッカーが使っている黒字に白文字のあの画面です。あの画面は何をしているかというと、パソコンに命令をして、その結果を表示しています。似たような言葉にCUIとかコマンドラインがありますが、大体同じような意味合いで使われていると思います。

余談ですが、昔のパソコンはすべてシェルで操作していました。つまり今のようなグラフィカルな画面が後発です。

### シェルの種類

シェルにもいろいろな種類があります。

- cmd（コマンドプロンプト）
- pwsh（PowerShell）
- sh
- bash
- zsh
- fish

コマンドプロンプトはWindowsのみ、PowerShellはLinuxでも動くみたいです。他のシェルは一般的にLinuxでしか動きませんが、Windowsに移植されてたりもするみたいです（詳しくは知りません）。

この記事では基本的にbashについて説明します。cmdとpwshを除く他のシェルでも大体同じような感じだと思います。

## 超基本

### コマンドとは

とりあえずお使いのシェルを起動しましょう。すると

```bash
toyama@toyama-note:~$
```

って感じの文字列が画面に表示されると思います（環境によっては多少違うかも）。`toyama`のところがログインしているユーザー名で`toyama-note`のところがパソコンに付けた名前です。`:`から`$`に挟まれた文字列はカレントディレクトリ（後述）です。`$`が表示されたらパソコンは命令待ちしています。

シェルでは、コマンドという命令を入力してエンターキーを押すとそのコマンドが実行され、その結果が表示されます。

例えばカレントディレクトリを表示するコマンド`pwd`を実行してみます。

実行結果

```bash
toyama@toyama-note:~$ pwd
/home/toyama
```

コマンドを実行するときは、`$`のあとに続けて`pwd`のようなコマンドをそのまま入力してください。`$`より前は入力しなくて大丈夫です。

今度はカレントディレクトリのファイルやディレクトリの一覧を表示していましょう。

```bash
toyama@toyama-note:~$ ls
SSTI  alarm
```

なにか`SSTI`と`alarm`があります。

### オプションとは

とりあえず`ls -l`を実行してみます。

実行結果

```bash
toyama@toyama-note:~$ ls -l
total 8
drwxr-xr-x 2 toyama toyama 4096 Oct 11 11:34 SSTI
drwxr-xr-x 2 toyama toyama 4096 Oct 13 21:32 alarm
```

さっきの`ls`単体とは異なった表示になりました。`-l`というのはオプションと呼ばれるもので、コマンドの動作を変えることができます。`-l`オプションは、ファイルの権限や作成者、作成日時などの詳細な情報を表示できます。オプションはいろんなコマンドに色々付いています。

大抵のオプションは`-l`のようにハイフン`-`から始まって英数字一文字のものと、`--all`のようなハイフン2つ`--`から始まって英単語が続くものの2つがあります。前者を短いオプション、後者を長いオプションとか読んだりします。`-a`と`--all`のように長短どっちのオプションも持っているものもあれば`-l`のような短いオプションだけのものや逆に`--author`のような長いオプションだけのものもあります。

### パスとは

`pwd`の実行結果の

```bash
toyama@toyama-note:~$ pwd
/home/toyama
```

`/home/toyama`はパスと呼ばれるものです。これは何かというと、ファイルやディレクトリ（＝フォルダー）の場所を示す文字列のことです。今回の場合はルートディレクトリと呼ばれるディレクトリの階層構造の天辺を示す`/`の中にある`home`ディレクトリの中の`toyama`を指しています。ディレクトリやファイルの階層はスラッシュ`/`で表現されます。

`./hogehoge`はカレントディレクトリ`.`にある`hogehoge`を示しています。`.`はカレントディレクトリを示します。

`../fugafuga`はカレントディレクトリの親ディレクトリ（上の階層のディレクトリ）にある`fugafuga`を示します。`..`は親ディレクトリを示します。

`~/aaa`はホームディレクトリにある`aaa`を示します。ホームディレクトリとは、通常`/home`にある自分のユーザー名のディレクトリです。今までの例だと`/home/toyama`です。`~`はホームディレクトリを示します。

`.`や`..`を用いた、カレントディレクトリを基準としたパスを相対パス、`/`から始まるようなパスを絶対パスと呼んだりします。

パスはコマンドに対して指定することもできます。たとえば

```bash
toyama@toyama-note:~$ ls /
bin   dev  home  lib    lib64   lost+found  mnt  proc  run   snap  sys  usr
boot  etc  init  lib32  libx32  media       opt  root  sbin  srv   tmp  var
```

`ls`コマンドにルートディレクトリ`/`を指定すると、上記の結果になります。

余談ですが、LinuxなどのOSのディレクトリ構造を規定する規格が存在します。

[Filesystem Hierarchy Standard](https://ja.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)

軽く覚えておくと、どこのディレクトリに何があるかわかるようになります。

### カレントディレクトリとは

カレントディレクトリとは、操作中のシェルが現在いるパスのことです。明示的に指定しなければ、すべてのコマンドはカレントディレクトリを基準に実行されます。

例えば`ls`は、何も指定しなければカレントディレクトリにあるファイルやディレクトリの一覧を表示します。一方で、あるディレクトリのパスを指定すると、そのディレクトリにあるファイルやディレクトリの一覧を表示します。

```bash
yamato@yamato-note:~$ ls
SSTI  alarm
yamato@yamato-note:~$ ls /
bin   dev  home  lib    lib64   lost+found  mnt  proc  run   snap  sys  usr
boot  etc  init  lib32  libx32  media       opt  root  sbin  srv   tmp  var
```

### Ctrl+c

コマンドを実行した後に、実行をキャンセルするには、`Ctrl+c`というショートカットキーを押しましょう。

```bash
yamato@yamato-note:~$ sleep 3
^C #Ctrl+cを押すと、^Cという文字が表示される
```
